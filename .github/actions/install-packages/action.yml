name: Install Packages
description: 'å®‰è£å°ˆæ¡ˆä¾è³´'

runs:
  using: "composite" 
  steps:  
    - name: Install Project Dependencies
      shell: bash
      run: |
        if [ -f "package.json" ]; then
          echo "ğŸ“¦ Found package.json in root, installing dependencies..."
          npm install
        else
          echo "âš ï¸ No package.json in root, skipping."
        fi
        
    - name: Install All Extensions Dependencies
      shell: C:\Progra~1\Git\bin\bash.exe --noprofile --norc -e -o pipefail {0}
      run: |
        echo "ğŸ” Checking extensions directory..."
        if [ -d "extensions" ]; then
          for dir in extensions/*/; do
            dir=${dir%*/}
            if [ -d "$dir" ] && [ -f "$dir/package.json" ]; then
              echo "ğŸ“¦ Installing dependencies for $dir..."
              (cd "$dir" && npm install)
            else
              echo "â­ï¸ Skipping $dir (No package.json found)"
            fi
          done
        else
          echo "âš ï¸ No 'extensions' directory found. Skipping."
        fi