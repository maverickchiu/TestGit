name: å¤–éƒ¨è³‡æºæ›´æ–°

run-name: ğŸš€ [production] ç‰ˆæœ¬:${{ inputs.version_name }} ç”± @${{ github.actor }} è§¸ç™¼

on:
  workflow_dispatch:
    inputs:
      version_name:
        description: 'ç‰ˆæœ¬åç¨±'
        required: true
        default: '1.2.12'
        type: string

jobs:
  build_windows:
    runs-on: [self-hosted]

    steps:
      - name: check out
        uses: actions/checkout@v4
        with:
          submodules: recursive
          lfs: true
          clean: false

      - name: Install Packages
        uses: ./.github/actions/install-packages

      - name: Build Bundle(Windows)
        uses: ./.github/actions/build-core
        with:
          git_token: ${{ github.token }} 
          force_clean: false
          environment: 'production'
          platform: windows
          dev_mode: false
          auto_compile: false
          version_name: ${{ inputs.version_name }}

  build_android:
    runs-on: [self-hosted]

    steps:
      - name: check out
        uses: actions/checkout@v4
        with:
          submodules: recursive
          lfs: true
          clean: false

      - name: Install Packages
        uses: ./.github/actions/install-packages

      - name: Build Bundle(Android)
        uses: ./.github/actions/build-core
        with:
          git_token: ${{ github.token }} 
          force_clean: false
          environment: 'production'
          platform: android
          dev_mode: false
          auto_compile: false
          version_name: ${{ inputs.version_name }}

  build_ios:
    runs-on: [self-hosted]

    steps:
      - name: check out
        uses: actions/checkout@v4
        with:
          submodules: recursive
          lfs: true
          clean: false

      - name: Install Packages
        uses: ./.github/actions/install-packages

      - name: Build Bundle(iOS)
        uses: ./.github/actions/build-core
        with:
          git_token: ${{ github.token }} 
          force_clean: false
          environment: 'production'
          platform: ios
          dev_mode: false
          auto_compile: false
          version_name: ${{ inputs.version_name }}
